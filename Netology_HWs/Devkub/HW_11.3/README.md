# devops-netology
### performed by Kirill Karagodin
#### HW 11.03 Микросервисы: подходы


#### Задача 1: Обеспечить разработку

Предложите решение для обеспечения процесса разработки: хранение исходного кода, непрерывная интеграция и непрерывная 
поставка. Решение может состоять из одного или нескольких программных продуктов и должно описывать способы и принципы 
их взаимодействия.

Решение должно соответствовать следующим требованиям:

- Облачная система; 
- Система контроля версий Git; 
- Репозиторий на каждый сервис; 
- Запуск сборки по событию из системы контроля версий; 
- Запуск сборки по кнопке с указанием параметров; 
- Возможность привязать настройки к каждой сборке; 
- Возможность создания шаблонов для различных конфигураций сборок; 
- Возможность безопасного хранения секретных данных: пароли, ключи доступа; 
- Несколько конфигураций для сборки из одного репозитория; 
- Кастомные шаги при сборке; 
- Собственные докер образы для сборки проектов; 
- Возможность развернуть агентов сборки на собственных серверах; 
- Возможность параллельного запуска нескольких сборок; 
- Возможность параллельного запуска тестов;

Обоснуйте свой выбор.
````
В целом все современные популярные решения для процесса разработки +/- обеспечивают требования предъявляемые к системе.

Это такие системы как:
- GitLab Ci/CD, для использования собственных докер образов можно использовать docker hub или artifactory
- Azure DevOps Services, для использования собственных докер образов можно использовать docker hub или artifactory
- TeamCity, но помимо использования отдельного хранилища для собственных образов необходимо подключать и системы 
контроля версий, например GitHub.

На основе свое опыта работы, я бы предложил использовать TeamCity+Bitbucket, но Azure DevOps Services (Azure DevOps 
Server) наиболее полно закрывает заявленные потребности, имеет наибольшую гибкость в настройке процессов и позволяет 
управлять и использовать все необходимые инструменты в одном окружении.
````
#### Задача 2: Логи

Предложите решение для обеспечения сбора и анализа логов сервисов в микросервисной архитектуре. Решение может состоять 
из одного или нескольких программных продуктов и должно описывать способы и принципы их взаимодействия.

Решение должно соответствовать следующим требованиям:
- Сбор логов в центральное хранилище со всех хостов обслуживающих систему;
- Минимальные требования к приложениям, сбор логов из stdout; 
- Гарантированная доставка логов до центрального хранилища; 
- Обеспечение поиска и фильтрации по записям логов; 
- Обеспечение пользовательского интерфейса с возможностью предоставления доступа разработчикам для поиска по записям 
логов; 
- Возможность дать ссылку на сохраненный поиск по записям логов;

Обоснуйте свой выбор.
```


В качестве решения задачи предлагаю использовать:
- Telegraf - сбор и доставки логов
- Elasticsearch - БД 
- Kibana - пользовательский интерфейс.

Полученное решение будет достаточно лёгким, удобным, надёжным и гибким в масштабировании
```
Решение | Задача
--- | ---
Telegraf | - Сбор логов в центральное хранилище со всех хостов обслуживающих систему <br /> - Минимальные требования к приложениям, сбор логов из stdout <br /> - Гарантированная доставка логов до центрального хранилища
Elasticsearch | - Обеспечение поиска и фильтрации по записям логов
Kibana | - Обеспечение пользовательского интерфейса с возможностью предоставления доступа разработчикам для поиска по записям логов <br /> - Возможность дать ссылку на сохраненный поиск по записям логов

#### Задача 3: Мониторинг

Предложите решение для обеспечения сбора и анализа состояния хостов и сервисов в микросервисной архитектуре. Решение 
может состоять из одного или нескольких программных продуктов и должно описывать способы и принципы их взаимодействия.

Решение должно соответствовать следующим требованиям:

- Сбор метрик со всех хостов, обслуживающих систему; 
- Сбор метрик состояния ресурсов хостов: CPU, RAM, HDD, Network; 
- Сбор метрик потребляемых ресурсов для каждого сервиса: CPU, RAM, HDD, Network; 
- Сбор метрик, специфичных для каждого сервиса; 
- Пользовательский интерфейс с возможностью делать запросы и агрегировать информацию; 
- Пользовательский интерфейс с возможность настраивать различные панели для отслеживания состояния системы;

Обоснуйте свой выбор.
Предлагаю использовать Prometheus и Grafana.
```
- Prometheus с его многочисленными exporter позволит собирать и хранить метрики с чего угодно дополняя их своими 
кастомными метриками, а при необходимости можно написать свой exporter
- Grafana - это мощное средство визуализации метрик хранящихся в Prometheus, позволяющее создавать свои панели и 
дашборды, или даже подобрать готовые. Так же Grafana позволяет настроить нотификации при возникновении предупреждений 
и включать в них снимки панелей, что бы наглядно видеть проблему не посещая саму систему
```